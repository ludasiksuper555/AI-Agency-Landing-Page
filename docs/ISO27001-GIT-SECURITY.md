# Інструкція з безпечного використання Git згідно з ISO 27001

## Огляд

Цей документ описує процедури безпечного використання Git у відповідності до вимог стандарту ISO 27001 для забезпечення конфіденційності, цілісності та доступності інформації в системі контролю версій.

## Вимоги ISO 27001 щодо контролю версій коду

Стандарт ISO 27001 вимагає впровадження наступних заходів безпеки при роботі з системами контролю версій:

1. **Контроль доступу** - обмеження доступу до репозиторіїв на основі ролей
2. **Шифрування даних** - захист чутливої інформації
3. **Аудит дій** - логування всіх операцій для можливості відстеження
4. **Перевірка коду** - запобігання витоку чутливих даних
5. **Автентифікація** - надійна ідентифікація користувачів
6. **Цілісність коду** - підписання комітів для підтвердження авторства

## Використання скрипту безпечного коміту

Для забезпечення відповідності вимогам ISO 27001 при роботі з Git, використовуйте скрипт `secure-git-commit.js`:

```bash
node scripts/secure-git-commit.js -m "Ваше повідомлення коміту" -b "назва_гілки"
```

### Параметри скрипту

- `-m, --message <повідомлення>` - Повідомлення коміту (обов'язковий параметр)
- `-b, --branch <гілка>` - Гілка для push (за замовчуванням - поточна)
- `--skip-sensitive-check` - Пропустити перевірку на чутливі дані
- `--skip-push` - Виконати лише коміт без push
- `-h, --help` - Показати довідку

## Налаштування GPG для підписання комітів

Для відповідності вимогам ISO 27001 щодо цілісності та автентичності коду, рекомендується налаштувати підписання комітів за допомогою GPG:

1. **Встановлення GPG**

   ```bash
   # Для Windows використовуйте Gpg4win або WSL
   # https://www.gnupg.org/download/
   ```

2. **Створення ключа GPG**

   ```bash
   gpg --full-generate-key
   ```

3. **Отримання ID ключа**

   ```bash
   gpg --list-secret-keys --keyid-format=long
   ```

4. **Налаштування Git для використання GPG**

   ```bash
   git config --global user.signingkey YOUR_KEY_ID
   git config --global commit.gpgsign true
   ```

5. **Додавання публічного ключа до GitHub/GitLab**
   ```bash
   gpg --armor --export YOUR_KEY_ID
   # Скопіюйте вивід та додайте його у налаштуваннях GitHub/GitLab
   ```

## Налаштування двофакторної автентифікації

Для підвищення безпеки доступу до репозиторіїв, налаштуйте двофакторну автентифікацію (2FA):

1. **Увімкнення 2FA у GitHub/GitLab**

   - Перейдіть до налаштувань безпеки вашого облікового запису
   - Увімкніть двофакторну автентифікацію
   - Налаштуйте метод 2FA (додаток або SMS)

2. **Створення токену доступу для CLI**

   - Після увімкнення 2FA, створіть персональний токен доступу
   - Використовуйте токен замість пароля при роботі з Git через командний рядок

   ```bash
   git remote set-url origin https://USERNAME:TOKEN@github.com/USERNAME/REPOSITORY.git
   ```

## Процедура перевірки коду перед комітом

1. **Автоматична перевірка на чутливі дані**

   - Скрипт `secure-git-commit.js` автоматично перевіряє файли на наявність чутливих даних
   - При виявленні потенційно чутливих даних, скрипт запитає підтвердження

2. **Ручна перевірка**

   - Перегляньте зміни перед комітом за допомогою `git diff --cached`
   - Переконайтеся, що не додаєте конфіденційну інформацію

3. **Використання .gitignore**
   - Додайте файли з чутливими даними до `.gitignore`
   - Використовуйте шаблони для виключення типових файлів з конфіденційною інформацією

## Аудит та логування

Скрипт `secure-git-commit.js` автоматично логує всі дії з Git для забезпечення аудиту згідно з вимогами ISO 27001:

- Створення комітів
- Виконання push
- Виявлення чутливих даних
- Помилки та попередження

Логи зберігаються у файлі `security-audit.log` та можуть бути використані для аудиту безпеки та відповідності вимогам ISO 27001.

## Рекомендації з безпеки

1. **Регулярно оновлюйте Git** до останньої версії для усунення вразливостей
2. **Використовуйте SSH або HTTPS** з токеном для безпечного з'єднання
3. **Не зберігайте облікові дані** у відкритому вигляді
4. **Регулярно змінюйте паролі та токени** доступу
5. **Використовуйте окремі облікові записи** для різних проектів
6. **Налаштуйте права доступу** відповідно до принципу найменших привілеїв
7. **Проводьте регулярний аудит** доступу до репозиторіїв

## Реагування на інциденти безпеки

У випадку виявлення порушення безпеки (наприклад, витоку облікових даних або несанкціонованого доступу):

1. **Негайно змініть облікові дані** (паролі, токени, ключі)
2. **Перевірте історію комітів** на наявність несанкціонованих змін
3. **Перегляньте логи доступу** до репозиторію
4. **Повідомте відповідальну особу** згідно з процедурою реагування на інциденти
5. **Задокументуйте інцидент** для подальшого аналізу

## Контактна інформація

З питань безпеки та відповідності вимогам ISO 27001 звертайтеся до відділу інформаційної безпеки:

- Email: security@ai-agency.com
- Внутрішній телефон: 1234
